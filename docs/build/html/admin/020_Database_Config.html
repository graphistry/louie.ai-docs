
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Database Server Configuration &#8212; Louie Administration Documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/graphistry.css?v=eb800932" />
    <link rel="stylesheet" type="text/css" href="../_static/graphistry.css?v=eb800932" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=8d563738"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'admin/020_Database_Config';</script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="GIS Mapping Service Configuration" href="025_GIS_Mapping.html" />
    <link rel="prev" title="LLM Configuration" href="008_LLM_Configuration.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="1.0.0" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/louie-logo.png" class="logo__image only-light" alt="Louie Administration Documentation - Home"/>
    <img src="../_static/louie-logo-dark.png" class="logo__image only-dark pst-js-only" alt="Louie Administration Documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Admin Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user/index.html">
    User Guide
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Admin Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user/index.html">
    User Guide
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Admin Guide</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction.html">Introduction</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../shared/Meet_Louie.html">Meet Louie</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shared/Overview.html">Overview</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="configuration.html">Configuration</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="006_System_Requirements.html">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="011_Authentication_Registration.html">Authentication Registration &amp; TLS</a></li>
<li class="toctree-l2"><a class="reference internal" href="008_LLM_Configuration.html">LLM Configuration</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Database Server Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="025_GIS_Mapping.html">GIS Mapping Service Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="026_Python_Package_Config.html">Python Sandbox Custom Pip Packages</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="security.html">Security</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="028_Security.html">Security Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="030_Security_Decisions.html">Security Decisions</a></li>
<li class="toctree-l2"><a class="reference internal" href="032_Security_APIs.html">Security APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="015_JWT_Refresh.html">Custom JWT Refresh (Optional)</a></li>
<li class="toctree-l2"><a class="reference internal" href="029_LLM_Authorization.html">LLM Authorization</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="maintenance.html">Maintenance</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="010_Logon_and_Services.html">Launching</a></li>
<li class="toctree-l2"><a class="reference internal" href="027_Backups.html">Backups</a></li>
<li class="toctree-l2"><a class="reference internal" href="007_LLM_Support.html">Supported LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="031_Sandbox_Network_Architecture.html">Sandbox network architecture: Secure execution of generated code</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Admin Guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="configuration.html" class="nav-link">Configuration</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Database Server Configuration</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="database-server-configuration">
<h1>Database Server Configuration<a class="headerlink" href="#database-server-configuration" title="Link to this heading">#</a></h1>
<p>Louie database connections are configured within the Louie UI.</p>
<p>Older versions of Louie supported setting database connection information via environment variables (now deprecated).</p>
<section id="key-concepts">
<h2>Key concepts<a class="headerlink" href="#key-concepts" title="Link to this heading">#</a></h2>
<p>Louie connectors are database-managed by the paired Graphistry server.</p>
<p>Connectors are associated with each organization or personal account.</p>
<p>A benefit of managed connectors is new Louie servers can be stood up with existing connector information already stored in the Graphistry server.</p>
<p>Louie will crawl a database upon first connection by a user so that Loiue will see what they can see.</p>
<section id="known-limitations">
<h3>Known limitations<a class="headerlink" href="#known-limitations" title="Link to this heading">#</a></h3>
<p>Currently, only one connector of each type can be loaded.</p>
</section>
</section>
<section id="system-configuration">
<h2>System configuration<a class="headerlink" href="#system-configuration" title="Link to this heading">#</a></h2>
<p>To configure Graphistry-managed connectors, set the following in <code class="docutils literal notranslate"><span class="pre">/var/louie/data/custom.env</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">USE_MANAGED_CONNECTORS</span><span class="o">=</span>True
<span class="nv">GRAPHISTRY_ENCRYPTION_KEYS</span><span class="o">=</span><span class="s2">&quot;your_encryption_keys&quot;</span>
<span class="nv">GRAPHISTRY_SIGNING_KEY</span><span class="o">=</span><span class="s2">&quot;your_signing_key&quot;</span>
<span class="nv">GRAPHISTRY_SIGNING_SALT</span><span class="o">=</span><span class="s2">&quot;your_signing_salt&quot;</span>
</pre></div>
</div>
<p>You can find these in your <a class="reference external" href="https://graphistry-admin-docs.readthedocs.io/en/latest/app-config/connector-management.html">Graphistry configuration files</a>.</p>
<p>Restart services after making changes.</p>
<p>Contact Graphistry staff for assistance with managed connectors and Databricks configuration.</p>
</section>
<section id="indexing">
<h2>Indexing<a class="headerlink" href="#indexing" title="Link to this heading">#</a></h2>
<p>Louie builds a semantic layer to understand what is in the database by gathering database schemas and samples. When a connector is per-user, meaning different users may have different data available, Loiue will index on a per-connecting-user basis.</p>
<p>Indexing occurs at connector creation time and on account login.</p>
<p>Users can always reindex via the connector panel.</p>
</section>
<section id="security">
<h2>Security<a class="headerlink" href="#security" title="Link to this heading">#</a></h2>
<ul>
<li><p>Authentication</p>
<p>Connectors such as Databricks support federated authentication. For example,  each database user can use their own Databricks SSO or personal PAT token, and thus securely use only the data allowed by Databricks Unity Catalog.</p>
<p>We generally recommend limiting database user privileges. For example, limit service accounts to read-only access, and consider using multiple organizations, each with a different database profiles.</p>
</li>
<li><p>Secrets encryption</p>
<p>Sensitive connector information stored in Graphistry is encrypted both at rest and in database memory.</p>
</li>
<li><p>Secure protocols</p>
<p>Louie connects to Graphistry as part of its OAuth2 flow, and then connector access is access controlled by the usual organization and user level RBAC. All traffic is with TLS.</p>
</li>
</ul>
</section>
<section id="setting-up-and-testing-a-connector">
<h2>Setting up and testing a connector<a class="headerlink" href="#setting-up-and-testing-a-connector" title="Link to this heading">#</a></h2>
<p>The connector management panel can be reached from the Louie UI on the bottom-left by expanding the connector panel. Connectors can be inspected, created, edited, and removed from the connector management panel.</p>
<p>The asset log tab in the connector panel is especially useful as a way to monitor indexing behavior or connection errors.</p>
</section>
<section id="database-connector-configuration">
<h2>Database Connector Configuration<a class="headerlink" href="#database-connector-configuration" title="Link to this heading">#</a></h2>
<section id="databricks">
<h3>Databricks<a class="headerlink" href="#databricks" title="Link to this heading">#</a></h3>
<p>The standard flow enables Databricks SSO and Unity Catalog.</p>
<ol class="arabic simple">
<li><p>Configure Databricks:</p></li>
</ol>
<ul>
<li><p>Go to <code class="docutils literal notranslate"><span class="pre">Manage</span> <span class="pre">Account-&gt;Settings-&gt;App</span> <span class="pre">Connections-&gt;Add</span> <span class="pre">Connection</span></code></p>
<ul>
<li><p>Give it an Application Name</p></li>
<li><p>Set the redirect URL to:
<a class="reference external" href="https://$">https://$</a>{LOUIE_HOSTNAME}/plugin/oauth/callback</p></li>
<li><p>Select “All APIs” for the Access Scope</p></li>
<li><p><strong>Uncheck</strong> Generate a client secret</p></li>
<li><p>Click <code class="docutils literal notranslate"><span class="pre">Add</span></code>, and save the generated <code class="docutils literal notranslate"><span class="pre">Client</span> <span class="pre">ID</span></code> for the following step</p>
<p>For more information, see <a class="reference external" href="https://docs.databricks.com/en/integrations/enable-disable-oauth.html#enable-custom-oauth-applications-using-the-databricks-ui">Enable or disable partner OAuth applications</a></p>
</li>
</ul>
</li>
</ul>
<ol class="arabic simple" start="2">
<li><p>Configure Louie:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">connector</span> <span class="pre">-&gt;</span> <span class="pre">Databricks</span></code></p>
<ul>
<li><p>Name of your choice</p></li>
<li><p>Host: <code class="docutils literal notranslate"><span class="pre">your_databricks_host.cloud.databricks.com</span></code></p></li>
<li><p>Workspace ID: <code class="docutils literal notranslate"><span class="pre">your_workspace_id</span></code></p></li>
<li><p>Cluster ID: <code class="docutils literal notranslate"><span class="pre">your_cluster_id</span></code></p>
<ul>
<li><p>Tip: When inspecting a <code class="docutils literal notranslate"><span class="pre">Shared</span> <span class="pre">Compute</span> <span class="pre">Cluster</span></code> in Databricks, the url will be like <code class="docutils literal notranslate"><span class="pre">https://your_databricks_host.cloud.databricks.com/compute/cluster/12345678</span></code>, where <code class="docutils literal notranslate"><span class="pre">12345678</span></code> is the cluster ID.</p></li>
</ul>
</li>
<li><p>Pick Token Auth, SSO Auth, or PAT Table Auth (predefined JSON table of per-user PAT tokens). Contact staff for more information here.</p></li>
</ul>
</li>
<li><p>Save and start indexing. When indexing is done, the status indicator in the bottom left panel will switch from in-progress to green.</p></li>
</ul>
</li>
<li><p>Try several test queries once the connector status in the bottom left area goes green:</p></li>
</ol>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Hey</span> <span class="pre">Louie,</span> <span class="pre">what</span> <span class="pre">is</span> <span class="pre">in</span> <span class="pre">Databricks?</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Great,</span> <span class="pre">pull</span> <span class="pre">10</span> <span class="pre">rows</span> <span class="pre">from</span> <span class="pre">table</span> <span class="pre">&lt;table_name&gt;</span></code></p></li>
</ul>
</section>
<section id="splunk">
<h3>Splunk<a class="headerlink" href="#splunk" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Ensure your Splunk account is setup for use:</p>
<ul class="simple">
<li><p>Ensure the REST API port (default: 8089) is open</p>
<ul>
<li><p>Splunk Cloud: <a class="reference external" href="https://docs.splunk.com/Documentation/SplunkCloud/latest/RESTTUT/RESTandCloud">Contact Splunk</a></p></li>
</ul>
</li>
<li><p>Authorize your Splunk user for REST API access and the intended default search indexes</p></li>
<li><p>Test Splunk is reachable and the account is authorized from your Louie server:</p></li>
</ul>
</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-u<span class="w"> </span><span class="si">${</span><span class="nv">SPUNK_USER</span><span class="si">}</span>:<span class="si">${</span><span class="nv">SPLUNK_PASSWORD</span><span class="si">}</span><span class="w"> </span>https://splunk.host.name.here:8089/services/search/jobs/export<span class="w">  </span>-d<span class="w"> </span><span class="nv">search</span><span class="o">=</span><span class="s2">&quot;search * | head 3&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="nv">output_mode</span><span class="o">=</span>csv<span class="sb">`</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Configure Louie for Splunk:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">connector</span> <span class="pre">-&gt;</span> <span class="pre">Splunk</span></code></p>
<ul>
<li><p>Host: <code class="docutils literal notranslate"><span class="pre">your_splunk_host</span></code></p></li>
<li><p>API Port: <code class="docutils literal notranslate"><span class="pre">8089</span></code></p></li>
<li><p>Protocol: <code class="docutils literal notranslate"><span class="pre">https</span></code></p></li>
<li><p>Username/Password: Your service account</p></li>
</ul>
</li>
<li><p>Save and start indexing. When indexing is done, the status indicator in the bottom left panel will switch from in-progress to green.</p></li>
</ul>
</li>
<li><p>Try several test queries once the connector status in the bottom left area goes green:</p></li>
</ol>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Hey</span> <span class="pre">Louie,</span> <span class="pre">what</span> <span class="pre">is</span> <span class="pre">in</span> <span class="pre">Splunk?</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Great,</span> <span class="pre">pull</span> <span class="pre">10</span> <span class="pre">rows</span> <span class="pre">from</span> <span class="pre">index</span> <span class="pre">&lt;index_name&gt;</span></code></p></li>
</ul>
</section>
</section>
<section id="deprecated-connections-as-environment-variables">
<h2>Deprecated: Connections as environment variables<a class="headerlink" href="#deprecated-connections-as-environment-variables" title="Link to this heading">#</a></h2>
<p>We encourage users to switch to database-managed connectors.</p>
<p>Benefits of database-managed connectors over environment variables are features like automatic secret encryption and easier deployment of new instances through automatic profile reuse.</p>
<section id="edit-configuration-file">
<h3>Edit Configuration File<a class="headerlink" href="#edit-configuration-file" title="Link to this heading">#</a></h3>
<p>Modify the <code class="docutils literal notranslate"><span class="pre">/var/louie/data/custom.env</span></code> file with your database settings.</p>
</section>
<section id="restart-services">
<h3>Restart Services<a class="headerlink" href="#restart-services" title="Link to this heading">#</a></h3>
<p>After making changes, restart the Louie and API services:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/var/louie
./dc<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>--force-recreate<span class="w"> </span>louie<span class="w"> </span>api
</pre></div>
</div>
</section>
<section id="ex-databricks-configuration">
<h3>Ex: Databricks Configuration<a class="headerlink" href="#ex-databricks-configuration" title="Link to this heading">#</a></h3>
<section id="mode-1-per-user-databricks-sso-authentication">
<h4>Mode 1: Per-User Databricks SSO Authentication<a class="headerlink" href="#mode-1-per-user-databricks-sso-authentication" title="Link to this heading">#</a></h4>
<ol class="arabic">
<li><p><strong>Create an App Connection in Databricks:</strong></p>
<ul>
<li><p>Navigate to <strong>Manage Account</strong> &gt; <strong>Settings</strong> &gt; <strong>App Connections</strong> &gt; <strong>Add Connection</strong>.</p></li>
<li><p>Provide an <strong>Application Name</strong>.</p></li>
<li><p>Set the <strong>Redirect URL</strong> to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="p">:</span><span class="o">//&lt;</span><span class="n">your_louie_server</span><span class="o">&gt;/</span><span class="n">sso</span><span class="o">/</span><span class="n">databricks</span><span class="o">/</span><span class="n">callback</span>
</pre></div>
</div>
</li>
<li><p>Select <strong>All APIs</strong> for the Access Scope.</p></li>
<li><p>Uncheck <strong>Generate a client secret</strong>.</p></li>
<li><p>Click <strong>Add</strong> and copy the generated <strong>Client ID</strong>.</p></li>
</ul>
</li>
<li><p><strong>Configure Louie:</strong></p>
<p>In <code class="docutils literal notranslate"><span class="pre">/var/louie/data/custom.env</span></code>, set:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">SPARK_TOKEN</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="w">  </span><span class="c1"># Note this is set to an empty string</span>
<span class="nv">SPARK_HOST</span><span class="o">=</span><span class="s2">&quot;your_databricks_host.cloud.databricks.com&quot;</span>
<span class="nv">SPARK_WORKSPACE_ID</span><span class="o">=</span><span class="s2">&quot;your_workspace_id&quot;</span>
<span class="nv">DATABRICKS_OAUTH_CLIENT_ID</span><span class="o">=</span><span class="s2">&quot;your_client_id&quot;</span>
</pre></div>
</div>
</li>
<li><p><strong>Restart Services:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/var/louie
./dc<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>--force-recreate<span class="w"> </span>louie<span class="w"> </span>api
</pre></div>
</div>
</li>
</ol>
<p><em>Ensure that the Databricks instance is reachable by the Louie server for authentication.</em></p>
</section>
<section id="mode-2-shared-service-account-not-recommended-for-high-security-environments">
<h4>Mode 2: Shared Service Account (Not Recommended for High-Security Environments)<a class="headerlink" href="#mode-2-shared-service-account-not-recommended-for-high-security-environments" title="Link to this heading">#</a></h4>
<ol class="arabic">
<li><p><strong>Configure Louie:</strong></p>
<p>In <code class="docutils literal notranslate"><span class="pre">/var/louie/data/custom.env</span></code>, set:</p>
</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">SPARK_TOKEN</span><span class="o">=</span><span class="s2">&quot;dapi...your_token...&quot;</span>
<span class="nv">SPARK_WORKSPACE_ID</span><span class="o">=</span><span class="s2">&quot;your_workspace_id&quot;</span>
<span class="nv">SPARK_HOST</span><span class="o">=</span><span class="s2">&quot;your_databricks_host.cloud.databricks.com&quot;</span>
</pre></div>
</div>
<ol class="arabic" start="2">
<li><p><strong>Restart Services:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/var/louie
./dc<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>--force-recreate<span class="w"> </span>louie<span class="w"> </span>api
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="other-databases">
<h3>Other databases<a class="headerlink" href="#other-databases" title="Link to this heading">#</a></h3>
<p>Contact staff.</p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#key-concepts">Key concepts</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#known-limitations">Known limitations</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#system-configuration">System configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#indexing">Indexing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#security">Security</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-and-testing-a-connector">Setting up and testing a connector</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#database-connector-configuration">Database Connector Configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#databricks">Databricks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#splunk">Splunk</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deprecated-connections-as-environment-variables">Deprecated: Connections as environment variables</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#edit-configuration-file">Edit Configuration File</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#restart-services">Restart Services</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ex-databricks-configuration">Ex: Databricks Configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#mode-1-per-user-databricks-sso-authentication">Mode 1: Per-User Databricks SSO Authentication</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#mode-2-shared-service-account-not-recommended-for-high-security-environments">Mode 2: Shared Service Account (Not Recommended for High-Security Environments)</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-databases">Other databases</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/admin/020_Database_Config.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, Graphistry, Inc..
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>